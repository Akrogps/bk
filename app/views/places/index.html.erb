  <!-- Searchbar -->
<div class="row search-page">

  <div class="search-form col-7">
    <%= form_for(:query, url: places_path, method: :get) do |f| %>
      <div>
        <%= f.fields_for :tags do |ff| %>
          <% Tag::TAGS.each do |tag| %>
            <%= ff.check_box tag, value: tag %>
            <%= ff.label tag %>
            <% end %>
          <% end %>
      </div>
      <div>
        <%= f.fields_for :categories do |ff| %>
          <% Category::CATEGORIES.each do |category| %>
            <%= ff.check_box category, value: category %>
            <%= ff.label category %>
            <% end %>
          <% end %>
      </div>
      <div>
        <div>
          <%= f.check_box "brunch", value: "brunch" %>
          <%= f.label "brunch" %>
        </div>
        <div>
          <%= f.check_box "terrace", value: "terrace" %>
          <%= f.label "terrace" %>
        </div>
        <div>
          <%= f.check_box "monday_night", value: "monday_night" %>
          <%= f.label "monday_night" %>
        </div>
        <div>
          <%= f.check_box "sunday_night", value: "sunday_night" %>
          <%= f.label "sunday_night" %>
        </div>
      </div>
      <%= f.submit "Go", value: "submit" %>
    <% end %>
  </div>

  <div class="col-5"
      id="map"
      style="width: 100%;
      height: 100vh;"
      data-markers="<%= @markers.to_json %>"
      data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
  </div>


  <!-- Resto cards -->
  <div class="search-cards justify-content-left col-7">
    <div class="card-grid justify-content-center" >
      <% @places_list.each do |place| %>
        <div class="card-resto">
          <%= cl_image_tag(place.images.where(main: true).first.photo, crop: :fit) %>
          <div class="card-resto-infos" style="text-decoration: none;">
            <h2><%= link_to place.title, place_path(place), class: "text-dark" %></h2>
          </div>
          <div class="card-resto-subtitle">
            <p><%= place.subtitle %></p>
          </div>
          <div class="card-resto-content">
            <p><%= truncate(place.address.gsub(",", "<br/>").html_safe, :length => 120) %></p>
            <% place.tags.each_with_index do |tag, index| %>
              <% if index == place.tags.count - 1 %>
                <span><%= tag.name %></span>
              <% else %>
                <span><%= tag.name %>,</span>
              <% end %>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>


